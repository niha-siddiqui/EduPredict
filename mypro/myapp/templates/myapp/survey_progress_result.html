{% extends "master.html"%}
{% block lala %}

  <section class="features" style="background-color: #0c1228; padding: 100px 0;">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-10 col-md-11">
          
          <!-- Result Card -->
          <div style="background: linear-gradient(135deg, rgba(22,34,57,0.95) 0%, rgba(12,18,40,0.98) 100%); padding: 60px; border-radius: 10px; box-shadow: 0px 10px 50px rgba(0,0,0,0.5); border: 1px solid rgba(245,164,37,0.1); position: relative; overflow: hidden;">
            
            <!-- Decorative Elements -->
            <div style="position: absolute; top: -50px; right: -50px; width: 200px; height: 200px; background: radial-gradient(circle, rgba(245,164,37,0.1) 0%, transparent 70%); border-radius: 50%;"></div>
            <div style="position: absolute; bottom: -30px; left: -30px; width: 150px; height: 150px; background: radial-gradient(circle, rgba(245,164,37,0.08) 0%, transparent 70%); border-radius: 50%;"></div>

            <!-- Header Section -->
            <div style="text-align: center; margin-bottom: 50px; position: relative; z-index: 1;">
              <div style="display: inline-block; background: linear-gradient(135deg, #f5a425 0%, #ff8800 100%); width: 90px; height: 90px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 25px; box-shadow: 0 8px 25px rgba(245,164,37,0.4);">
                <i class="fa fa-line-chart" style="font-size: 40px; color: #fff;"></i>
              </div>
              <h2 style="color: #fff; font-size: 36px; font-weight: 800; letter-spacing: 1px; margin-bottom: 15px; text-transform: uppercase;">
                Student <span style="color: #f5a425;">Progress</span> Result
              </h2>
              <div style="width: 80px; height: 3px; background: linear-gradient(90deg, transparent, #f5a425, transparent); margin: 20px auto;"></div>
              <p style="color: rgba(255,255,255,0.7); font-size: 15px;">
                Your academic journey analysis
              </p>
            </div>

            <!-- Progress Display -->
            <div style="background: rgba(245,164,37,0.05); padding: 40px; border-radius: 8px; margin-bottom: 40px; border: 2px solid rgba(245,164,37,0.2); position: relative; z-index: 1;">
              <h3 style="color: rgba(255,255,255,0.8); font-size: 16px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 25px; text-align: center;">
                <i class="fa fa-percent" style="color: #f5a425; margin-right: 10px;"></i>Overall Progress Score
              </h3>
              
              <!-- Progress Number -->
              <div style="text-align: center; font-size: 72px; font-weight: 800; color: #f5a425; margin-bottom: 25px; text-shadow: 0 0 30px rgba(245,164,37,0.5);">
                {{ progress }}%
              </div>

              <!-- Animated Progress Bar -->
              <div style="width: 100%; height: 30px; background: rgba(250,250,250,0.1); border-radius: 15px; overflow: hidden; position: relative; box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);">
                <div id="progressBar" style="height: 100%; background: linear-gradient(90deg, #f5a425 0%, #ff8800 100%); border-radius: 15px; width: 0%; transition: width 2s ease; box-shadow: 0 0 20px rgba(245,164,37,0.8); display: flex; align-items: center; justify-content: center;">
                  <span style="color: #fff; font-weight: 700; font-size: 14px; opacity: 0; transition: opacity 0.5s ease 1.5s;">{{ progress }}%</span>
                </div>
              </div>

              <!-- Progress Status -->
              <div style="text-align: center; margin-top: 20px;">
                {% if progress >= 75 %}
                  <span style="display: inline-block; background: linear-gradient(135deg, rgba(75,192,192,0.2) 0%, rgba(75,192,192,0.1) 100%); padding: 12px 30px; border-radius: 50px; border: 2px solid rgba(75,192,192,0.5); color: #4bc0c0; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; font-size: 14px;">
                    <i class="fa fa-thumbs-up" style="margin-right: 8px;"></i>Excellent Progress!
                  </span>
                {% elif progress >= 50 %}
                  <span style="display: inline-block; background: linear-gradient(135deg, rgba(245,164,37,0.2) 0%, rgba(245,164,37,0.1) 100%); padding: 12px 30px; border-radius: 50px; border: 2px solid rgba(245,164,37,0.5); color: #f5a425; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; font-size: 14px;">
                    <i class="fa fa-trophy" style="margin-right: 8px;"></i>Good Progress
                  </span>
                {% else %}
                  <span style="display: inline-block; background: linear-gradient(135deg, rgba(255,159,64,0.2) 0%, rgba(255,159,64,0.1) 100%); padding: 12px 30px; border-radius: 50px; border: 2px solid rgba(255,159,64,0.5); color: #ff9f40; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; font-size: 14px;">
                    <i class="fa fa-rocket" style="margin-right: 8px;"></i>Keep Improving!
                  </span>
                {% endif %}
              </div>
            </div>

            <!-- Summary Section -->
            <div style="background: rgba(245,164,37,0.03); padding: 40px; border-radius: 8px; margin-bottom: 30px; border-left: 4px solid #4bc0c0; position: relative; z-index: 1;">
              <h3 style="color: #4bc0c0; font-size: 20px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 25px;">
                <i class="fa fa-file-text" style="margin-right: 10px;"></i>Progress Summary
              </h3>
              
              <div style="background: rgba(250,250,250,0.02); padding: 30px; border-radius: 8px; border: 1px solid rgba(250,250,250,0.05);">
                <p style="color: rgba(255,255,255,0.85); font-size: 15px; line-height: 32px; margin: 0; text-align: justify; letter-spacing: 0.3px;">
                  {{ paragraph }}
                </p>
              </div>
            </div>

            <!-- Motivational Quote Section -->
            <div style="background: linear-gradient(135deg, rgba(245,164,37,0.1) 0%, rgba(245,164,37,0.05) 100%); padding: 40px; border-radius: 8px; margin-bottom: 40px; border-left: 4px solid #f5a425; position: relative; z-index: 1; text-align: center;">
              <div style="margin-bottom: 20px;">
                <i class="fa fa-quote-left" style="font-size: 32px; color: rgba(245,164,37,0.4);"></i>
              </div>
              
              <h3 style="color: #f5a425; font-size: 18px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 25px;">
                <i class="fa fa-lightbulb-o" style="margin-right: 10px;"></i>Words of Encouragement
              </h3>
              
              <p style="color: rgba(255,255,255,0.9); font-size: 18px; line-height: 34px; margin: 0; font-style: italic; font-weight: 500; letter-spacing: 0.5px;">
                "{{ quote }}"
              </p>
              
              <div style="margin-top: 20px;">
                <i class="fa fa-quote-right" style="font-size: 32px; color: rgba(245,164,37,0.4);"></i>
              </div>
            </div>

            <!-- Trait Scores Chart Section -->
            <div style="background: rgba(245,164,37,0.03); padding: 40px; border-radius: 8px; margin-bottom: 40px; border-left: 4px solid #f5a425; position: relative; z-index: 1;">
              <h3 style="color: #f5a425; font-size: 20px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 30px; text-align: center;">
                <i class="fa fa-bar-chart" style="margin-right: 10px;"></i>Trait Analysis Breakdown
              </h3>
              
              <div style="background: rgba(250,250,250,0.03); padding: 30px; border-radius: 8px;">
                <canvas id="traitChart" style="max-height: 400px;"></canvas>
              </div>
            </div>

            <!-- Trait Details Grid -->
            <div class="row" style="position: relative; z-index: 1; margin-bottom: 30px;">
              <div class="col-md-6" style="margin-bottom: 20px;">
                <div style="background: rgba(30,144,255,0.08); padding: 25px; border-radius: 8px; border-left: 4px solid #1E90FF; height: 100%;">
                  <h4 style="color: #1E90FF; font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px;">
                    <i class="fa fa-bullseye" style="margin-right: 10px;"></i>Focus Level
                  </h4>
                  <p style="color: rgba(255,255,255,0.75); font-size: 14px; line-height: 24px; margin: 0;">
                    Your concentration and attention management during study sessions.
                  </p>
                </div>
              </div>

              <div class="col-md-6" style="margin-bottom: 20px;">
                <div style="background: rgba(0,191,255,0.08); padding: 25px; border-radius: 8px; border-left: 4px solid #00BFFF; height: 100%;">
                  <h4 style="color: #00BFFF; font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px;">
                    <i class="fa fa-book" style="margin-right: 10px;"></i>Study Method
                  </h4>
                  <p style="color: rgba(255,255,255,0.75); font-size: 14px; line-height: 24px; margin: 0;">
                    Effectiveness of your learning strategies and revision techniques.
                  </p>
                </div>
              </div>

              <div class="col-md-6" style="margin-bottom: 20px;">
                <div style="background: rgba(135,206,250,0.08); padding: 25px; border-radius: 8px; border-left: 4px solid #87CEFA; height: 100%;">
                  <h4 style="color: #87CEFA; font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px;">
                    <i class="fa fa-puzzle-piece" style="margin-right: 10px;"></i>Problem Solving
                  </h4>
                  <p style="color: rgba(255,255,255,0.75); font-size: 14px; line-height: 24px; margin: 0;">
                    Your approach to tackling challenging academic problems.
                  </p>
                </div>
              </div>

              <div class="col-md-6" style="margin-bottom: 20px;">
                <div style="background: rgba(70,130,180,0.08); padding: 25px; border-radius: 8px; border-left: 4px solid #4682B4; height: 100%;">
                  <h4 style="color: #4682B4; font-size: 16px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px;">
                    <i class="fa fa-rocket" style="margin-right: 10px;"></i>Motivation
                  </h4>
                  <p style="color: rgba(255,255,255,0.75); font-size: 14px; line-height: 24px; margin: 0;">
                    Your drive and enthusiasm towards academic achievements.
                  </p>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div style="text-align: center; margin-top: 45px; position: relative; z-index: 1;">
              <a href="{% url 'student_progress_survey' %}" style="display: inline-block; background: linear-gradient(135deg, #f5a425 0%, #ff8800 100%); color: #fff; font-size: 15px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; padding: 20px 50px; border: none; outline: none; text-decoration: none; transition: all 0.4s; border-radius: 50px; box-shadow: 0px 8px 30px rgba(245,164,37,0.4); margin: 0 10px 10px 10px;">
                <i class="fa fa-refresh" style="margin-right: 12px;"></i>Take Survey Again
              </a>
              <a href="/" style="display: inline-block; background: transparent; color: #f5a425; font-size: 15px; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 700; padding: 20px 50px; border: 2px solid #f5a425; outline: none; text-decoration: none; transition: all 0.4s; border-radius: 50px; margin: 0 10px 10px 10px;">
                <i class="fa fa-home" style="margin-right: 12px;"></i>Back to Home
              </a>
            </div>

            <!-- Info Note -->
            <div style="margin-top: 45px; padding: 25px 30px; background: linear-gradient(135deg, rgba(245,164,37,0.08) 0%, rgba(245,164,37,0.03) 100%); border-left: 4px solid #f5a425; border-radius: 8px; position: relative; z-index: 1;">
              <div style="display: flex; align-items: flex-start;">
                <i class="fa fa-info-circle" style="color: #f5a425; font-size: 24px; margin-right: 18px; margin-top: 3px;"></i>
                <div>
                  <h5 style="color: #f5a425; font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 10px;">
                    Understanding Your Results
                  </h5>
                  <p style="color: rgba(255,255,255,0.75); font-size: 13px; line-height: 24px; margin: 0;">
                    This progress analysis evaluates your academic traits across four key dimensions. Use these insights to identify areas of strength and opportunities for improvement in your learning journey.
                  </p>
                </div>
              </div>
            </div>

          </div>

        </div>
      </div>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Animate progress bar on load with smooth animation
    window.addEventListener('load', function() {
      const progressBar = document.getElementById('progressBar');
      const progressText = progressBar.querySelector('span');
      const targetWidth = {{ progress }};
      
      setTimeout(function() {
        progressBar.style.width = targetWidth + '%';
        if (progressText) {
          progressText.style.opacity = '1';
        }
      }, 100);
    });

    // Bar chart for traits
    const ctx = document.getElementById('traitChart').getContext('2d');
    const traitChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Focus', 'Study Method', 'Problem Solving', 'Motivation'],
            datasets: [{
                label: 'Trait Scores (0-3)',
                data: [
                    {{ trait_scores.focus.1|default:0 }},
                    {{ trait_scores.study.1|default:0 }},
                    {{ trait_scores.problem.1|default:0 }},
                    {{ trait_scores.motivation.1|default:0 }}
                ],
                backgroundColor: [
                    'rgba(30, 144, 255, 0.8)',
                    'rgba(0, 191, 255, 0.8)',
                    'rgba(135, 206, 250, 0.8)',
                    'rgba(70, 130, 180, 0.8)'
                ],
                borderColor: [
                    'rgba(30, 144, 255, 1)',
                    'rgba(0, 191, 255, 1)',
                    'rgba(135, 206, 250, 1)',
                    'rgba(70, 130, 180, 1)'
                ],
                borderWidth: 2,
                borderRadius: 8,
                borderSkipped: false,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: { 
                    display: false 
                },
                tooltip: {
                    backgroundColor: 'rgba(22,34,57,0.95)',
                    titleColor: '#f5a425',
                    bodyColor: '#fff',
                    borderColor: '#f5a425',
                    borderWidth: 1,
                    padding: 12,
                    displayColors: true,
                    callbacks: {
                        label: function(context) {
                            return 'Score: ' + context.parsed.y + '/3';
                        }
                    }
                }
            },
            scales: {
                y: { 
                    beginAtZero: true, 
                    max: 3,
                    grid: {
                        color: 'rgba(250,250,250,0.05)',
                        borderColor: 'rgba(250,250,250,0.1)'
                    },
                    ticks: {
                        color: 'rgba(255,255,255,0.7)',
                        font: {
                            size: 12
                        },
                        stepSize: 1
                    }
                },
                x: {
                    grid: {
                        display: false,
                        borderColor: 'rgba(250,250,250,0.1)'
                    },
                    ticks: {
                        color: 'rgba(255,255,255,0.7)',
                        font: {
                            size: 12
                        }
                    }
                }
            }
        }
    });
  </script>

  <style>
    /* Button hover effects */
    a[href*="student_progress_survey"]:hover,
    a[href="/"]:hover {
      transform: translateY(-3px);
      box-shadow: 0px 12px 40px rgba(245,164,37,0.6);
    }

    a[href*="student_progress_survey"]:active,
    a[href="/"]:active {
      transform: translateY(-1px);
    }

    a[href="/"]:hover {
      background: rgba(245,164,37,0.1);
    }

    /* Mobile Responsiveness */
    @media screen and (max-width: 767px) {
      section.features > div > div > div > div {
        padding: 40px 25px !important;
      }

      h2 {
        font-size: 28px !important;
      }

      div[style*="font-size: 72px"] {
        font-size: 56px !important;
      }

      .col-md-6 {
        margin-bottom: 20px !important;
      }

      a[href*="student_progress_survey"],
      a[href="/"] {
        display: block !important;
        margin: 10px 0 !important;
        padding: 16px 40px !important;
      }

      canvas {
        max-height: 300px !important;
      }
    }

    @media screen and (max-width: 480px) {
      h2 {
        font-size: 24px !important;
      }

      div[style*="font-size: 72px"] {
        font-size: 48px !important;
      }

      section.features > div > div > div > div > div:first-child > div:first-child {
        width: 75px !important;
        height: 75px !important;
      }

      section.features > div > div > div > div > div:first-child > div:first-child i {
        font-size: 32px !important;
      }
    }
  </style>

{% endblock %}